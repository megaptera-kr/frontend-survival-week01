# frontend-survival-week01

프론트엔드 생존코스 1주차 과제

## React + TypeScript + Parcel

### 프로젝트 생성

```bash
mkdir my-app    // 생성
cd my-app          // my-app 이동
```

### npm

```bash
npm init -y     // 기본설정
```

```txt
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

- [**.gitignore**](https://github.com/github/gitignore/blob/main/Node.gitignore) 파일 작성 및 설정

### TypeScript 세팅

```bash
npm i -D typescript    // -D는 도구로서 설치를 의미 
npx tsc --init              // 초기화
```

- tsconfig.json파일의 jsx 속성을 변경

```json
{
    "jsx": "react-jsx", // "jsx": "preserve", 
}
```

### ESLint 세팅

```bash
npm i -D eslint
npx eslint --init
```

- Y  → To check syntax, find problemes, and enforce code style → JavaScript modules(import/export) → React → Y → Browser → Use a popular style guide → XO → JavaScript → Y → npm&#x20; </br>

```javascript
module.exports = {
    env: {
        browser: true,
        es2021: true,
        jest: true,         // 설정
    },
    extends: [
        'plugin:react/recommended',
        'plugin:react/jsx-runtime',
        'xo',
    ],
    overrides: [
        {
            extends: [
                'xo-typescript',
            ],
            files: [
                '*.ts',
                '*.tsx',
            ],
        },
    ],
    parserOptions: {
        ecmaVersion: 'latest',
        sourceType: 'module',
    },
    plugins: [
        'react',
    ],
    rules: {
    },
};
```

- **.eslintrc.js** 파일을 적절히 수정\
  Jest 미설치 → 미리 jest:true를 설정해주면 좋다.</br>

```txt
/node_modules/
/dist/
/.parcel-cache/
```

- .eslintignore 파일을 작성한다.

### React 설정

```bash
npm i react react-dom
npm i -D @types/react @types/react-dom
```

### React 기본 코드 작성

```bash
mkdir src
touch src/index.tsx
touch src/App.tsx
```

`src/App.tsx` 파일:

```tsx
export default function App() {
  return (
    <p>Hello, world!</p>
  );
}
```

`src/main.tsx` 파일:

```tsx
import ReactDOM from 'react-dom/client';
import App from './App';

const element = document.getElementById('root');

if (element) {
    const root = ReactDOM.createRoot(element);
    root.render(<App/>);
}
```

## Jest도구 세팅

```bash
npm i -D jest @types/jest @swc/core @swc/jest
jest-environment-jsdom
@testing-library/react @testing-library/jest-dom
```

```javascript
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: [
    '@testing-library/jest-dom/extend-expect',
    './jest.setup',
  ],
  transform: {
    '^.+\\.(t|j)sx?$': ['@swc/jest', {
      jsc: {
        parser: {
          syntax: 'typescript',
          jsx: true,
          decorators: true,
        },
        transform: {
          react: {
            runtime: 'automatic',
          },
        },
      },
    }],
  },
  testPathIgnorePatterns: [
    '<rootDir>/node_modules/',
    '<rootDir>/dist/',
  ],
};
```

- [**jest.config.js**](https://github.com/ahastudio/CodingLife/blob/main/20220726/react/jest.config.js) 파일을 작성해 테스트에서 SWC를 사용하자.

`src/main.test.tsx` 파일 작성:

```tsx
function add(x: number, y: number): number {
    return x + y;
}

describe('add', () => {
    it('returns sum of two numbers', () => {
        expect(add(1, 2)).toBe(3);
    });
});

test('숫자 더하기', () => {
    expect(add(1, 2)).toBe(3);
});
```

Run tests:

```bash
npm test
```

### Parcel 설치

```bash
npm i -D parcel
```

```json
{
"source": "./index.html",
    "scripts": {
        "start": "parcel --port 8081",  // 나는 포트 번호가 겹치므로 8080대신 8081 사용
        "lint": "eslint --fix --ext .js,.jsx,.ts,.tsx .",  // 오류 고치기
    }
}
```

```bash
npm run lint
```

- [package.json](https://github.com/ahastudio/CodingLife/blob/main/20220726/react/package.json) 파일 scripts를 적절히 수정 및 source속성 추가
- 오류 고치기 `lint` 설정</br>

```bash
npm install -D parcel-reporter-static-files-copy
```

```json
{
  "extends": ["@parcel/config-default"],
  "reporters":  ["...", "parcel-reporter-static-files-copy"]
}
```

- `parcel-reporter-static-files-copy`패키지 설치 후 `.parcelrc` 파일 작성. 이렇게 하면 static 폴더의 파일을 정적 파일로 Serving할 수 있다(이미지 등 Assets).</br>

```bash
npx parcel build
npx servor ./dist
```

- 빌드 + 정적 서버 실행

`index.html` 파일 작성:

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Demo App</title>
</head>
<body>
    <div id="root"></div>
    <!-- <p>Hello, world !</p> -->
    <script type="module" src="./src/main.tsx"></script>
</body>
</html>
```

Run web server for development:

```bash
npm start
```

### Visual Studio Code 세팅

```json
{
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    }
}
```

- `.vscode/settings.json` 파일을 추가해 JS/TS 파일을 저장할 때마다 ESLint를 실행하고 문제점을 고칠 수 있게 설정.
- [VS Code ESLint extension](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint) (vscode 확장 설치)
