# frontend-survival-week01

프론트엔드 생존코스 1주차 과제

## React + TypeScript + Parcel

### npm 프로젝트 생성

빈 폴더 생성 후 해당 경로에서 밑의 명령어 진행

```typescript
npm init -y
```

### typescript

```typescript
npm i -D typescript
npx tsc --init
```

jsx를 사용하기 위해 tsconfig.json 파일에서 옵션 수정

```typescript
{
  "compilerOptions": {
    // ...(전략)...
    "jsx": "react-jsx",
    // ...(후략)...
  }
}
```

typescript 컴파일을 통해 문법 오류를 확인하는 check 명령을 package.json 파일에 추가

```typescript
  "scripts": {
    "start": "parcel --port 3000",
    "build": "parcel build",
    "check": "tsc --noEmit",
    "lint": "eslint --fix --ext .js,.jsx,.ts,.tsx .",
    "test": "jest",
    "coverage": "jest --coverage --coverage-reporters html",
    "watch:test": "jest --watchAll"
  },
```

### .gitignore 파일 생성

```typescript
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

### ESLint 세팅

```typescript
npm install --save-dev eslint
npm install @typescript-eslint/parser@latest --save-dev
npx eslint --init
```

```typescript
Ok to proceed? (y)

? How would you like to use ESLint?
> To check syntax, find problems, and enforce code style

? What type of modules does your project use?
> JavaScript modules (import/export)

? Which framework does your project use?
> React

? Does your project use TypeScript?
> Yes

? Where does your code run?
> Browser

? How would you like to define a style for your project?
> Use a popular style guide

? Which style guide do you want to follow?
> XO: https://github.com/xojs/eslint-config-xo-typescript

? What format do you want your config file to be in?
> JavaScript

? Would you like to install them now?
> Yes

? Which package manager do you want to use?
> npm
```

.eslintrc.js 파일에 설정 추가

```typescript
module.exports = {
  env: {
    browser: true,
    jest: true,
    es2021: true,
  },
  extends: [
    'xo',
    'plugin:react/recommended',
    '@typescript-eslint/parser',
    'prettier',
  ],
  overrides: [
    {
      env: {
        node: true,
      },
      files: ['.eslintrc.{js,cjs}'],
      parserOptions: {
        sourceType: 'script',
      },
    },
    {
      extends: ['xo-typescript'],
      files: ['*.ts', '*.tsx'],
    },
  ],
  parserOptions: {
    project: 'tsconfig.json',
    tsconfigRootDir: __dirname,
    sourceType: 'module',
  },
  plugins: ['react'],
};
```

.eslintignore 파일 작성

```typescript

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# Bower dependency directory (https://bower.io/)
bower_components

# node-waf configuration
.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)
build/Release

# Dependency directories
node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)
web_modules/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Next.js build output
.next
out

# Nuxt.js build / generate output
.nuxt
dist

# Gatsby files
.cache/
# Comment in the public line in if your project uses Gatsby and not Next.js
# https://nextjs.org/blog/next-9-1#public-directory-support
# public

# vuepress build output
.vuepress/dist

# vuepress v2.x temp and cache directory
.temp
.cache

# Docusaurus cache and generated files
.docusaurus

# Serverless directories
.serverless/

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Stores VSCode versions used for testing VSCode extensions
.vscode-test

# yarn v2
.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.*
```

Lint and fix all

```typescript
npm run lint
```

### React

React 설치

```typescript
npm install react react-dom
npm install --save-dev @types/react @types/react-dom
```

React 기본 코드 작성

```typescript
mkdir src
touch src/index.tsx
touch src/App.tsx
```

App.tsx

```typescript
import { useState } from 'react';
import Greeting from './components/Greeting';

export default function App({ name }: { name: string }) {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1);
  };

  return (
    <>
      <Greeting name='world' />
      <img
        src='../static/images/images.jpg'
        alt=''
        style={{ width: '200px', height: '200px' }}
      />
      <p>Count: {count}</p>
      <button type='button' onClick={handleClick}>
        클릭!
      </button>
    </>
  );
}
```

main.tsx

```typescript
import ReactDOM from 'react-dom/client';
import App from './App';

function Demo({ count }: { count: number }) {
  return <p>Demo {count}</p>;
}

function main() {
  const element = document.getElementById('root');
  const element2 = document.getElementById('demo');

  if (!element || !element2) {
    return;
  }

  const root = ReactDOM.createRoot(element);
  const root2 = ReactDOM.createRoot(element2);

  let count = 0;

  root.render(<App name='hello world' />);
  setInterval(() => {
    count += 1;
    root2.render(<Demo count={count} />);
  }, 1_000);
}

main();
```

/components/Greeting.tsx

```typescript
export default function Greeting({ name }: { name: string }) {
  return <div>Hello {name}</div>;
}
```

### Jest

```typescript
npm i -D jest @types/jest @swc/core @swc/jest \
  jest-environment-jsdom \
  @testing-library/react @testing-library/jest-dom@5.16.4
```

jest.config.js 파일 생성 후 설정 추가

```typescript
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['@testing-library/jest-dom/extend-expect'],
  transform: {
    '^.+\\.(t|j)sx?$': [
      '@swc/jest',
      {
        jsc: {
          parser: {
            syntax: 'typescript',
            jsx: true,
            decorators: true,
          },
          transform: {
            react: {
              runtime: 'automatic',
            },
          },
        },
      },
    ],
  },
  testPathIgnorePatterns: ['<rootDir>/node_modules/', '<rootDir>/dist/'],
};
```

jest-setup.js 파일 생성

```typescript
import '@testing-library/jest-dom';
```

.eslintrc.js 설정 추가

```typescript
module.exports = {
  env: {
    // ...(전략)...
    jest: true,
  },
  // ...(후략)...
};
```

src/main.test.tsx 파일 작성

```typescript
function add(x: number, y: number): number {
  return x + y;
}
const context = describe;

describe('add 함수는', () => {
  it('두 숫자의 합을 리턴한다.', () => {
    expect(add(1, 2)).toBe(3);
  });

  it('숫자를 리턴한다.', () => {
    expect(typeof add(1, 2)).toBe('number');
  });

  context('하나의 양수와 음수가 주어지면', () => {
    it('항상 하나의 양수보다 작은 값을 돌려준다.', () => {
      expect(add(1, -2)).toBeLessThan(1);
    });
  });
});
```

src/component/Greeting.test.tsx

```typescript
import { render, screen } from '@testing-library/react';
import Greeting from './Greeting';

test('Greeting', () => {
  render(<Greeting name='world' />);

  screen.getByText('Hello, world');

  screen.getByText(/Hello/);

  expect(screen.queryByText(/Hello/)).toBeInTheDocument();

  expect(screen.queryByText(/Hi/)).not.toBeVisible();
});
```

### Parcel

```typescript
npm i -D parcel
```

index.html 파일 작성

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>react demo app</title>
  </head>
  <body>
    <div id="root"></div>
    <div id="demo"></div>
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
```

package.json source 추가

```typescript
// (...중략)
  "source": "index.html",
// (...중략)
```

Run web server for development:

```typescript
npm start
```

정적 파일을 관리하기 위한 모듈 설치

```typescript
npm install -D parcel-reporter-static-files-copy
```

.parcelrc 파일 생성 및 설정 추가

```typescript
{
  "extends": ["@parcel/config-default"],
  "reporters":  ["...", "parcel-reporter-static-files-copy"]
}
```

static 폴더 생성 및 하위 폴더 images 생성

## ESLint 설정

.vscode 폴더 생성, setting.json 하위 파일 생성 및 설정

```typescript
{
  "editor.rulers": [80],
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "trailing-spaces.trimOnSave": true
}
```
